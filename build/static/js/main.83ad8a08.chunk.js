(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[5],{153:function(e,t,n){},158:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(51),u=n.n(c),s=n(28),i=n(84),o=n(15),l=n(21),b=n(17),p=n(36),f=n(86),j=n.n(f),d=n(69),h=n(55),v=Object(l.a)(Object(b.d)({serializableCheck:{ignoredActions:[p.a,p.f,p.b,p.c,p.d,p.e]}})),O={key:"auth",storage:j.a,whitelist:["token"]},g=Object(b.a)({reducer:{auth:Object(p.g)(O,h.a),contacts:d.a},middleware:v,devTools:!1}),x=Object(p.h)(g),m=n(39),k=n(3),y=n(92),_=n(7),w=n(18),L=n(88),I=n.n(L),C=n(2);function U(e){var t=e.children;return Object(C.jsx)("div",{className:I.a.container,children:t})}var N=n(48),A=n.n(N);function W(){return Object(C.jsxs)("div",{children:[Object(C.jsx)(s.b,{to:"/register",className:function(e){return e.isActive?A.a.activeLink:A.a.link},children:"Register"}),Object(C.jsx)(s.b,{to:"/login",className:function(e){return e.isActive?A.a.activeLink:A.a.link},children:"Login"})]})}var z=n(49),F=n.n(z);function V(){var e=Object(o.c)(w.b.getIsLoggedIn);return Object(C.jsxs)("nav",{children:[Object(C.jsx)(s.b,{to:"/",className:function(e){return e.isActive?F.a.activeLink:F.a.link},children:"Welcome"}),e&&Object(C.jsx)(s.b,{to:"/contacts",className:function(e){return e.isActive?F.a.activeLink:F.a.link},children:"Contacts"})]})}var B=n.p+"static/media/default-avatar.2a907e6b.png",T=n(59),R=n.n(T),M=n(176);function S(){var e=Object(o.b)(),t=Object(o.c)(w.b.getUserName),n=B;return Object(C.jsxs)("div",{className:R.a.container,children:[Object(C.jsx)("img",{className:R.a.avatar,src:n,alt:"user avatar",width:"32"}),Object(C.jsxs)("span",{className:R.a.text,children:["Welcome, ",t]}),Object(C.jsx)(M.a,{onClick:function(){return e(w.a.logOut())},variant:"contained",children:"Log out"})]})}var J,E=n(91),K=n.n(E);function P(){var e=Object(o.c)(w.b.getIsLoggedIn);return Object(C.jsxs)("header",{className:K.a.header,children:[Object(C.jsx)(V,{}),e?Object(C.jsx)(S,{}):Object(C.jsx)(W,{})]})}function Y(e){var t=e.redirectTo,n=void 0===t?"/":t,r=e.children;return Object(o.c)(w.b.getIsLoggedIn)?r:Object(C.jsx)(k.a,{to:n})}function D(e){var t=e.children,n=e.redirectTo,r=void 0===n?"/":n,a=e.restricted,c=void 0!==a&&a;return Object(o.c)(w.b.getIsLoggedIn)&&c?Object(C.jsx)(k.a,{to:r}):t}var G=Object(_.css)(J||(J=Object(m.a)(["\n  display: block;\n  text-align: center;\n  border-color: black;\n"]))),Q=Object(r.lazy)((function(){return n.e(1).then(n.bind(null,234))})),q=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,235))})),H=Object(r.lazy)((function(){return n.e(2).then(n.bind(null,236))})),X=Object(r.lazy)((function(){return Promise.all([n.e(8),n.e(0)]).then(n.bind(null,232))})),Z=Object(r.lazy)((function(){return n.e(3).then(n.bind(null,237))}));function $(){var e=Object(o.b)(),t=Object(o.c)(w.b.getIsFetchingCurrent);return Object(r.useEffect)((function(){e(w.a.fetchCurrentUser())}),[e]),!t&&Object(C.jsxs)(U,{children:[Object(C.jsx)(P,{}),Object(C.jsx)(r.Suspense,{fallback:Object(C.jsx)(y.PropagateLoader,{css:G,size:15}),children:Object(C.jsxs)(k.d,{children:[Object(C.jsx)(k.b,{path:"/",element:Object(C.jsx)(D,{children:Object(C.jsx)(Q,{})})}),Object(C.jsx)(k.b,{path:"/register",element:Object(C.jsx)(D,{restricted:!0,redirectTo:"/login",children:Object(C.jsx)(q,{})})}),Object(C.jsx)(k.b,{path:"/login",element:Object(C.jsx)(D,{restricted:!0,redirectTo:"/contacts",children:Object(C.jsx)(H,{})})}),Object(C.jsx)(k.b,{path:"*",element:Object(C.jsx)(Z,{})}),Object(C.jsx)(k.b,{path:"/contacts",element:Object(C.jsx)(Y,{redirectTo:"/login",children:Object(C.jsx)(X,{})})})]})})]})}n(153),n(154),n(155),n(156),n(157);u.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(o.a,{store:g,children:Object(C.jsx)(i.a,{loading:null,persistor:x,children:Object(C.jsx)(s.a,{children:Object(C.jsx)($,{})})})})}),document.getElementById("root"))},18:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return a}));var r=n(35),a={getIsLoggedIn:function(e){return e.auth.isLoggedIn},getUserName:function(e){return e.auth.user.name},getIsFetchingCurrent:function(e){return e.auth.isFetchingCurrentUser}};n(55)},35:function(e,t,n){"use strict";var r=n(6),a=n.n(r),c=n(10),u=n(26),s=n.n(u),i=function(e){s.a.defaults.headers.common.Authorization="Bearer ".concat(e)},o=function(){s.a.defaults.headers.common.Authorization=""};function l(e){return b.apply(this,arguments)}function b(){return(b=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post("/users/signup",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post("/users/login",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return d.apply(this,arguments)}function d(){return(d=Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post("/users/logout");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return v.apply(this,arguments)}function v(){return(v=Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("/users/current");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=n(17),g=Object(O.b)("auth/register ",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,l(t);case 4:return c=e.sent,i(c.token),e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),x=Object(O.b)("auth/login ",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,p(t);case 4:return c=e.sent,i(c.token),e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),m=Object(O.b)("auth/logout ",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,j();case 4:o(),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),k=Object(O.b)("auth/refresh",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState(),null===(c=r.auth.token)&&n.rejectWithValue(),i(c),e.prev=4,u=h(),e.abrupt("return",u);case 9:return e.prev=9,e.t0=e.catch(4),e.abrupt("return",n.rejectWithValue(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t,n){return e.apply(this,arguments)}}()),y={register:g,logOut:m,logIn:x,fetchCurrentUser:k};t.a=y},38:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return v}));var r=n(6),a=n.n(r),c=n(10),u=n(26),s=n.n(u);function i(){return o.apply(this,arguments)}function o(){return(o=Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("/contacts");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e,t){return b.apply(this,arguments)}function b(){return(b=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post("/contacts",{name:t,number:n});case 2:return r=e.sent,c=r.data,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.delete("/contacts/".concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}s.a.defaults.baseURL="https://connections-api.herokuapp.com";var j=n(17),d=Object(j.b)("contacts/FetchContacts",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,i();case 4:return c=e.sent,e.abrupt("return",c);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),h=Object(j.b)("contacts/AddContact",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name,c=t.number,u=n.rejectWithValue,e.prev=2,e.next=5,l(r,c);case 5:return s=e.sent,e.abrupt("return",s);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",u(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}()),v=Object(j.b)("contacts/DeleteContact",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,p(t);case 4:return e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}())},48:function(e,t,n){e.exports={link:"AuthNav_link__2ejsg",activeLink:"AuthNav_activeLink__3huQJ AuthNav_link__2ejsg"}},49:function(e,t,n){e.exports={link:"Navigation_link__12o2K",activeLink:"Navigation_activeLink__2rUFB Navigation_link__12o2K"}},55:function(e,t,n){"use strict";var r,a=n(4),c=n(87),u=n(17),s=n(35),i=Object(u.c)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1},extraReducers:(r={},Object(a.a)(r,s.a.register.fulfilled,(function(e,t){var n=t.payload;e.user=n.user,e.token=n.token,e.isLoggedIn=!0})),Object(a.a)(r,s.a.logIn.fulfilled,(function(e,t){var n=t.payload;e.user=n.user,e.token=n.token,e.isLoggedIn=!0})),Object(a.a)(r,s.a.logOut.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(a.a)(r,s.a.fetchCurrentUser.pending,(function(e){e.isFetchingCurrentUser=!0})),Object(a.a)(r,s.a.fetchCurrentUser.fulfilled,(function(e,t){var n=t.payload;e.user=Object(c.a)({},n),e.isLoggedIn=!0,e.isFetchingCurrentUser=!1})),Object(a.a)(r,s.a.fetchCurrentUser.rejected,(function(e){e.isFetchingCurrentUser=!1})),r)});t.a=i.reducer},59:function(e,t,n){e.exports={container:"UserMenu_container__GgYhE",text:"UserMenu_text__3m5R_",link:"UserMenu_link__3TBBB",avatar:"UserMenu_avatar__2e7Jj"}},69:function(e,t,n){"use strict";n.d(t,"b",(function(){return l}));var r,a=n(4),c=n(21),u=n(17),s=n(38),i=Object(u.c)({name:"contacts",initialState:{items:[],filter:"",error:null},reducers:{filter:function(e,t){var n=t.payload;e.filter=n}},extraReducers:(r={},Object(a.a)(r,s.c.fulfilled,(function(e,t){var n=t.payload;e.items=n})),Object(a.a)(r,s.a.fulfilled,(function(e,t){var n=t.payload;e.items=[].concat(Object(c.a)(e.items),[n])})),Object(a.a)(r,s.b.fulfilled,(function(e,t){var n=t.payload;e.items=e.items.filter((function(e){return e.id!==n}))})),Object(a.a)(r,s.c.rejected,(function(e,t){var n=t.payload;e.error=n})),Object(a.a)(r,s.a.rejected,(function(e,t){var n=t.payload;e.error=n})),Object(a.a)(r,s.b.rejected,(function(e,t){var n=t.payload;e.error=n})),r)}),o=i.reducer;t.a=o;var l=i.actions.filter},88:function(e,t,n){e.exports={container:"Container_container__3RIox"}},91:function(e,t,n){e.exports={header:"AppBar_header__1Yk8v"}}},[[158,6,7]]]);
//# sourceMappingURL=main.83ad8a08.chunk.js.map